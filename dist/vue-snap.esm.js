import{elementScrollByPolyfill as t}from"seamless-scroll-polyfill/dist/esm/Element.scrollBy";import"core-js/modules/es.array.every";import"core-js/modules/es.array.find-index";import"core-js/modules/es.array.map";import e from"lodash/debounce";var r=function(t,e,r){return Math.abs(t-e)<=r},n="undefined"==typeof window,i=!n;function s(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}n||"scrollBehavior"in document.documentElement.style||t();function a(t,e,r,n,i,s,o,a,c,l){"boolean"!=typeof o&&(c=a,a=o,o=!1);const d="function"==typeof r?r.options:r;let u;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),n&&(d._scopeId=n),s?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(s)},d._ssrRegister=u):e&&(u=o?function(t){e.call(this,l(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(d.functional){const t=d.render;d.render=function(e,r){return u.call(r),t(e,r)}}else{const t=d.beforeCreate;d.beforeCreate=t?[].concat(t,u):[u]}return r}const c={props:{hideArrows:{type:Boolean,default:!1},hideArrowsOnBound:{type:Boolean,default:!1},tag:{type:String,default:"ul"},i18n:{type:Object,default:function(){return{slideLeft:"Slide left",slideRight:"Slide right"}},validator:function(t){return["slideLeft","slideRight"].every((function(e){return e in t}))}}},data:function(){return{boundLeft:!0,boundRight:!1,slidesWidth:[],wrapperScrollWidth:0,wrapperVisibleWidth:0,currentPage:0,currentPos:0,maxPages:0,step:1,observer:null,onResizeFn:null,onScrollFn:null}},watch:{currentPage:function(t,e){t!==e&&this.$emit("page",{current:t,previous:e})}},mounted:function(){this.calcOnInit(),i&&(this.onResizeFn=e(this.calcOnInit,410),this.onScrollFn=e(this.calcOnScroll,100),this.attachMutationObserver(),this.$refs.vsWrapper.addEventListener("scroll",this.onScrollFn),window.addEventListener("resize",this.onResizeFn,!1))},beforeDestroy:function(){i&&(this.observer.disconnect(),this.$refs.vsWrapper.removeEventListener("scroll",this.onScrollFn),window.removeEventListener("resize",this.onResizeFn,!1))},methods:{calcOnInit:function(){this.$refs.vsWrapper&&(this.calcWrapperWidth(),this.calcSlidesWidth(),this.calcCurrentPosition(),this.calcCurrentPage(),this.calcBounds(),this.calcMaxPages())},calcOnScroll:function(){this.$refs.vsWrapper&&(this.calcCurrentPosition(),this.calcCurrentPage(),this.calcBounds())},calcBounds:function(){var t=r(this.currentPos,0,5),e=r(this.wrapperScrollWidth-this.wrapperVisibleWidth,this.currentPos,5);t?(this.$emit("bound-left",!0),this.boundLeft=!0):this.boundLeft=!1,e?(this.$emit("bound-right",!0),this.boundRight=!0):this.boundRight=!1},calcWrapperWidth:function(){this.wrapperScrollWidth=this.$refs.vsWrapper.scrollWidth,this.wrapperVisibleWidth=this.$refs.vsWrapper.offsetWidth},calcSlidesWidth:function(){var t=s(this.$refs.vsWrapper.children);this.slidesWidth=t.map((function(t){return{offsetLeft:t.offsetLeft,width:t.offsetWidth}}))},calcCurrentPage:function(){var t=this,e=this.slidesWidth.findIndex((function(e){return r(e.offsetLeft,t.currentPos,5)}));-1!==e&&-2!==e&&(this.currentPage=e||0)},calcCurrentPosition:function(){this.currentPos=this.$refs.vsWrapper.scrollLeft||0},calcMaxPages:function(){var t=this.wrapperScrollWidth-this.wrapperVisibleWidth;this.maxPages=this.slidesWidth.findIndex((function(e){return e.offsetLeft>t}))-1},calcNextWidth:function(t){var e=t>0?this.currentPage:this.currentPage+t,r=this.slidesWidth[e].width||0;if(r)return r*t},attachMutationObserver:function(){var t=this;this.observer=new MutationObserver((function(){t.calcOnInit()})),this.observer.observe(this.$refs.vsWrapper,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},changeSlide:function(t){var e=-1===t&&this.boundLeft,r=1===t&&this.boundRight;if(!e&&!r){var n=this.calcNextWidth(t);n&&this.scrollTo(n)}},scrollTo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.$refs.vsWrapper.scrollBy({left:t,behavior:"smooth"})}}};var l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"vs-carousel"},[r(t.tag,{ref:"vsWrapper",tag:"component",staticClass:"vs-carousel__wrapper"},[t._t("default")],2),t._v(" "),t.hideArrows?t._e():t._t("arrows",[r("button",{directives:[{name:"show",rawName:"v-show",value:!t.hideArrowsOnBound||!t.boundLeft,expression:"hideArrowsOnBound ? !boundLeft : true"}],staticClass:"\n        vs-carousel__arrows\n        vs-carousel__arrows--left\n      ",attrs:{type:"button","aria-label":t.i18n.slideLeft,disabled:t.boundLeft},on:{click:function(e){return t.changeSlide(-1)}}},[t._v("\n      ←\n    ")]),t._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:!t.hideArrowsOnBound||!t.boundRight,expression:"hideArrowsOnBound ? !boundRight : true"}],staticClass:"\n        vs-carousel__arrows\n        vs-carousel__arrows--right\n      ",attrs:{type:"button","aria-label":t.i18n.slideRight,disabled:t.boundRight},on:{click:function(e){return t.changeSlide(1)}}},[t._v("\n      →\n    ")])],{changeSlide:t.changeSlide,boundLeft:t.boundLeft,boundRight:t.boundRight})],2)};l._withStripped=!0;const d=a({render:l,staticRenderFns:[]},undefined,c,undefined,false,undefined,!1,void 0,void 0,void 0);const u={props:{tag:{type:String,default:"li"}}};var h=function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.tag,{ref:"vsSlide",tag:"component",staticClass:"vs-carousel__slide",attrs:{tabindex:"0"}},[t._t("default")],2)};h._withStripped=!0;const f=a({render:h,staticRenderFns:[]},undefined,u,undefined,false,undefined,!1,void 0,void 0,void 0);var p={install:function(t){t.component("carousel",d),t.component("slide",f)}};export default p;export{d as Carousel,f as Slide};
