import{polyfill as t}from"seamless-scroll-polyfill/dist/esm/Element.scrollBy";import"core-js/modules/es.array.find-index";import"core-js/modules/es.array.from";import"core-js/modules/es.array.map";import"core-js/modules/es.string.iterator";import e from"lodash.debounce";var i="undefined"==typeof window,s=!i;i||"scrollBehavior"in document.documentElement.style||t();function r(t,e,i,s,r,n,o,a,c,l){"boolean"!=typeof o&&(c=a,a=o,o=!1);const d="function"==typeof i?i.options:i;let h;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,r&&(d.functional=!0)),s&&(d._scopeId=s),n?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(n)},d._ssrRegister=h):e&&(h=o?function(t){e.call(this,l(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),h)if(d.functional){const t=d.render;d.render=function(e,i){return h.call(i),t(e,i)}}else{const t=d.beforeCreate;d.beforeCreate=t?[].concat(t,h):[h]}return i}const n={props:{navigationArrows:{type:Boolean,default:!0}},data:function(){return{boundLeft:!0,boundRight:!1,slidesWidth:[],wrapperScrollWidth:0,wrapperVisibleWidth:0,currentPage:0,currentPos:0,maxPages:0,step:1,observer:null}},mounted:function(){this.calcOnInit(),s&&(this.attachMutationObserver(),this.$refs.vsWrapper.addEventListener("scroll",e(this.calcOnScroll,100)),window.addEventListener("resize",e(this.calcOnInit,410),!1))},beforeDestroy:function(){s&&(this.observer.disconnect(),this.$refs.vsWrapper.removeEventListener("scroll",e(this.calcOnScroll,100)),window.removeEventListener("resize",e(this.calcOnInit,410),!1))},methods:{calcOnInit:function(){this.calcWrapperWidth(),this.calcSlidesWidth(),this.calcCurrentPosition(),this.calcBounds(),this.calcMaxPages()},calcOnScroll:function(){this.calcCurrentPosition(),this.calcBounds()},calcBounds:function(){this.boundLeft=0===this.currentPos,this.boundRight=this.wrapperScrollWidth-this.wrapperVisibleWidth===this.currentPos},calcWrapperWidth:function(){this.wrapperScrollWidth=this.$refs.vsWrapper.scrollWidth,this.wrapperVisibleWidth=this.$refs.vsWrapper.offsetWidth},calcSlidesWidth:function(){var t=Array.from(this.$refs.vsWrapper.childNodes);this.slidesWidth=t.map((function(t){return{offsetLeft:t.offsetLeft,width:t.offsetWidth}}))},calcCurrentPosition:function(){var t=this;this.currentPos=this.$refs.vsWrapper.scrollLeft||0,this.currentPage=this.slidesWidth.findIndex((function(e){return i=e.offsetLeft,s=t.currentPos,r=5,Math.abs(i-s)<=r;var i,s,r})),-1===this.currentPage&&(this.currentPage=this.maxPages)},calcMaxPages:function(){var t=this.wrapperScrollWidth-this.wrapperVisibleWidth;this.maxPages=this.slidesWidth.findIndex((function(e){return e.offsetLeft>t}))-1},calcNextWidth:function(t){var e=t>0?this.currentPage:this.currentPage+t,i=this.slidesWidth[e].width||0;if(i)return i*t},attachMutationObserver:function(){var t=this;this.observer=new MutationObserver((function(){t.calcOnInit()})),this.observer.observe(this.$el,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},changeSlide:function(t){var e=-1===t&&this.boundLeft,i=1===t&&this.boundRight;if(!e&&!i){var s=this.calcNextWidth(t);s&&this.scrollTo(s)}},scrollTo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.$refs.vsWrapper.scrollBy({left:t,behavior:"smooth"})}}};var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vs-carousel"},[i("div",{ref:"vsWrapper",staticClass:"vs-carousel__wrapper"},[t._t("default")],2),t._v(" "),t.navigationArrows?t._t("navigation",[i("button",{directives:[{name:"show",rawName:"v-show",value:!t.boundLeft,expression:"!boundLeft"}],staticClass:"\n        vs-carousel__navigation\n        vs-carousel__navigation--left\n      ",attrs:{type:"button","aria-label":"Slide left"},on:{click:function(e){return t.changeSlide(-1)}}},[t._v("\n      ←\n    ")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:!t.boundRight,expression:"!boundRight"}],staticClass:"\n        vs-carousel__navigation\n        vs-carousel__navigation--right\n      ",attrs:{type:"button","aria-label":"Slide right"},on:{click:function(e){return t.changeSlide(1)}}},[t._v("\n      →\n    ")])]):t._e()],2)};o._withStripped=!0;const a=r({render:o,staticRenderFns:[]},undefined,n,undefined,false,undefined,!1,void 0,void 0,void 0);var c=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"vsSlide",staticClass:"vs-carousel__slide",attrs:{tabindex:"0"}},[t._t("default")],2)};c._withStripped=!0;const l=r({render:c,staticRenderFns:[]},undefined,{},undefined,false,undefined,!1,void 0,void 0,void 0);var d={install:function(t){t.component("carousel",a),t.component("slide",l)}};export default d;export{a as Carousel,l as Slide};
